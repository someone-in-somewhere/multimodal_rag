<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Admin Panel - Qu·∫£n l√Ω t√†i li·ªáu cho h·ªá th·ªëng Multi-modal RAG">
    <meta name="author" content="Multi-modal RAG System">
    <meta name="robots" content="noindex, nofollow">
    
    <title>Admin Panel - Qu·∫£n L√Ω T√†i Li·ªáu | Multi-modal RAG</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìö</text></svg>">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/static/admin.css">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="/">
</head>
<body>
    <!-- Loading Screen (Optional) -->
    <div id="loadingScreen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(102, 126, 234, 0.95); color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999;">
        <div class="spinner" style="width: 50px; height: 50px; margin-bottom: 20px;"></div>
        <h2>ƒêang t·∫£i...</h2>
    </div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="header-title">
                    <h1>üìö Qu·∫£n L√Ω T√†i Li·ªáu</h1>
                    <p>H·ªá th·ªëng Multi-modal RAG - Admin Panel</p>
                </div>
                <a href="/" class="btn-back" title="Quay v·ªÅ trang chat">
                    üè† V·ªÅ Trang Chat
                </a>
            </div>
        </header>

        <!-- Stats Dashboard -->
        <section class="stats-section" aria-label="Th·ªëng k√™ h·ªá th·ªëng">
            <div class="stat-card">
                <div class="stat-icon" aria-hidden="true">üìÑ</div>
                <div class="stat-info">
                    <h3 id="totalDocs" aria-label="T·ªïng s·ªë t√†i li·ªáu">0</h3>
                    <p>T·ªïng t√†i li·ªáu</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" aria-hidden="true">üìù</div>
                <div class="stat-info">
                    <h3 id="totalChunks" aria-label="T·ªïng s·ªë text chunks">0</h3>
                    <p>Text Chunks</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" aria-hidden="true">üìã</div>
                <div class="stat-info">
                    <h3 id="totalTables" aria-label="T·ªïng s·ªë b·∫£ng">0</h3>
                    <p>B·∫£ng</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" aria-hidden="true">üñºÔ∏è</div>
                <div class="stat-info">
                    <h3 id="totalImages" aria-label="T·ªïng s·ªë h√¨nh ·∫£nh">0</h3>
                    <p>H√¨nh ·∫£nh</p>
                </div>
            </div>
        </section>

        <!-- Upload Section -->
        <section class="upload-section" aria-label="Khu v·ª±c upload t√†i li·ªáu">
            <h2>üì§ Upload T√†i Li·ªáu M·ªõi</h2>
            
            <div class="upload-area" id="dropZone" tabindex="0" role="button" aria-label="Khu v·ª±c k√©o th·∫£ file">
                <div class="upload-icon" aria-hidden="true">üìÅ</div>
                <p class="upload-text">K√©o th·∫£ file v√†o ƒë√¢y ho·∫∑c nh·∫•n ƒë·ªÉ ch·ªçn</p>
                
                <input 
                    type="file" 
                    id="fileInput" 
                    multiple 
                    accept=".pdf,.docx,.doc,.txt,.md,.html,.png,.jpg,.jpeg,.gif,.webp"
                    style="display:none"
                    aria-label="Ch·ªçn file ƒë·ªÉ upload"
                >
                
                <button 
                    onclick="document.getElementById('fileInput').click()" 
                    class="btn-upload"
                    type="button"
                    aria-label="Ch·ªçn file">
                    üìé Ch·ªçn File
                </button>
                
                <p class="upload-hint">
                    <strong>H·ªó tr·ª£:</strong> PDF, DOCX, TXT, MD, HTML, Images<br>
                    <strong>K√≠ch th∆∞·ªõc t·ªëi ƒëa:</strong> 50MB/file
                </p>
            </div>
            
            <!-- Upload Progress -->
            <div id="uploadProgress" aria-live="polite" aria-atomic="true"></div>
            
            <!-- Upload Status -->
            <div id="uploadStatus" class="status-message" role="status" aria-live="polite"></div>
        </section>

        <!-- Documents List -->
        <section class="documents-section" aria-label="Danh s√°ch t√†i li·ªáu">
            <div class="section-header">
                <h2>üìã Danh S√°ch T√†i Li·ªáu</h2>
                
                <div class="actions">
                    <input 
                        type="search" 
                        id="searchInput" 
                        placeholder="üîç T√¨m ki·∫øm t√†i li·ªáu..." 
                        aria-label="T√¨m ki·∫øm t√†i li·ªáu"
                    >
                    
                    <button 
                        id="refreshBtn"
                        onclick="refreshDocuments(true)" 
                        class="btn-refresh"
                        type="button"
                        aria-label="L√†m m·ªõi danh s√°ch">
                        üîÑ L√†m m·ªõi
                    </button>
                    
                    <button 
                        id="deleteAllBtn"
                        onclick="deleteAllDocuments()" 
                        class="btn-danger"
                        type="button"
                        aria-label="X√≥a t·∫•t c·∫£ t√†i li·ªáu">
                        üóëÔ∏è X√≥a t·∫•t c·∫£
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <table id="documentsTable" role="table" aria-label="B·∫£ng danh s√°ch t√†i li·ªáu">
                    <thead>
                        <tr>
                            <th scope="col">STT</th>
                            <th scope="col">T√™n File</th>
                            <th scope="col">Lo·∫°i</th>
                            <th scope="col">Text</th>
                            <th scope="col">Tables</th>
                            <th scope="col">Images</th>
                            <th scope="col">Th·ªùi gian</th>
                            <th scope="col">H√†nh ƒë·ªông</th>
                        </tr>
                    </thead>
                    <tbody id="documentsBody">
                        <!-- Documents will be loaded here dynamically -->
                    </tbody>
                </table>
                
                <!-- Empty State -->
                <div id="emptyState" class="empty-state" style="display:none">
                    <div class="empty-icon" aria-hidden="true">üì≠</div>
                    <p>Ch∆∞a c√≥ t√†i li·ªáu n√†o trong h·ªá th·ªëng</p>
                    <p style="color: #999; font-size: 0.9em; margin: 10px 0 20px 0;">
                        H√£y upload t√†i li·ªáu ƒë·∫ßu ti√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng h·ªá th·ªëng RAG
                    </p>
                    <button 
                        onclick="document.getElementById('fileInput').click()" 
                        class="btn-primary"
                        type="button">
                        üì§ Upload t√†i li·ªáu ƒë·∫ßu ti√™n
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Delete Confirmation Modal -->
    <div 
        id="deleteModal" 
        class="modal" 
        role="dialog" 
        aria-labelledby="modalTitle" 
        aria-describedby="deleteMessage"
        aria-hidden="true">
        <div class="modal-content" role="document">
            <h3 id="modalTitle">‚ö†Ô∏è X√°c nh·∫≠n x√≥a</h3>
            <p id="deleteMessage"></p>
            <div class="modal-actions">
                <button 
                    onclick="closeDeleteModal()" 
                    class="btn-secondary"
                    type="button"
                    aria-label="H·ªßy b·ªè">
                    H·ªßy
                </button>
                <button 
                    onclick="confirmDelete()" 
                    class="btn-danger"
                    type="button"
                    aria-label="X√°c nh·∫≠n x√≥a">
                    X√≥a
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div 
        id="toast" 
        class="toast" 
        role="alert" 
        aria-live="assertive" 
        aria-atomic="true">
    </div>

    <!-- Footer (Optional) -->
    <footer style="text-align: center; padding: 20px; color: white; font-size: 0.9em;">
        <p>Multi-modal RAG System v1.0 | 
            <a href="/docs" style="color: white; text-decoration: underline;" target="_blank">API Docs</a> | 
            <a href="/health" style="color: white; text-decoration: underline;" target="_blank">Health Check</a>
        </p>
    </footer>

    <!-- Scripts -->
    <script src="/static/admin.js"></script>
    
    <!-- Service Worker (Optional - for PWA) -->
    <script>
        // Register service worker if supported
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Uncomment to enable PWA features
                // navigator.serviceWorker.register('/sw.js')
                //     .then(reg => console.log('Service Worker registered', reg))
                //     .catch(err => console.log('Service Worker registration failed', err));
            });
        }
    </script>

    <!-- Analytics (Optional) -->
    <!-- Add your analytics code here -->

    <!-- Keyboard shortcuts hint -->
    <div id="keyboardHints" style="display: none; position: fixed; bottom: 20px; left: 20px; background: rgba(0,0,0,0.8); color: white; padding: 15px; border-radius: 10px; font-size: 0.85em; z-index: 1000;">
        <div style="font-weight: bold; margin-bottom: 5px;">‚å®Ô∏è Ph√≠m t·∫Øt:</div>
        <div>‚Ä¢ Ctrl/Cmd + R: L√†m m·ªõi</div>
        <div>‚Ä¢ Esc: ƒê√≥ng modal</div>
    </div>

</body>
</html>
